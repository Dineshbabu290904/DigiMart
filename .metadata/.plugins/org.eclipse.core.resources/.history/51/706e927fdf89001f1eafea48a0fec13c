<%@page import="com.shopping.project.ConnectionProvider"%>
<%@page import="java.sql.*"%>

<%
String name = request.getParameter("name");
String email = request.getParameter("email");
String phone = request.getParameter("phone");
String user_type = request.getParameter("user_type");
String password = request.getParameter("password");
String securityQuestion = request.getParameter("securityQuestion");
String answer = request.getParameter("answer");
try{
	Connection con = ConnectionProvider.getCon();
	PreparedStatement P = con.prepareStatement("INSERT INTO Users (name, email, phone, user_type, password, securityQuestion, securityAnswer) VALUES (?, ?, ?, ?, ?, ?, ?, ?)");
	P.setString(1, username);
	P.setString(2, name);
	P.setString(3, email);
	P.setString(4, phone);
	P.setString(5, user_type);
	P.setString(6, password);
	P.setString(7, securityQuestion);
	P.setString(8, answer);
	P.executeUpdate();
	response.sendRedirect("signup.jsp?msg=valid");
} catch(Exception e){
	System.out.println(e);
	response.sendRedirect("signup.jsp?msg=invalid");
}
%>